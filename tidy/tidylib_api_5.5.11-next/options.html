<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>HTML Tidy: Tidy Config Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HTML Tidy
   &#160;<span id="projectnumber">5.5.11</span>
   </div>
   <div id="projectbrief">The HTACG Tidy HTML Project</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('options.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Tidy Config Options </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Tidy supports a quite large number of configuration options. The full list can be output using <code>-help-config</code>. This will show the option to be used either on the command line or in a configuration file, the type of option, and the value(s) that can be used. The current default value for each option can be seen using <code>-show-config</code>.</p>
<p>The options can also be listed in xml format. <code>-xml-help</code> will output each option plus a description. <code>-xml-config</code> will not only output the option and a desciption, but will include the type, default and examples. These xml outputs are used, with the aid of <code>xsltproc</code> and <code>doxygen</code>, to generate the <a href="http://api.html-tidy.org/">API Documentation</a>.</p>
<p>These options can also be used by application linking with <code>libtidy</code>. For each option there is a <code>TidyOptionId</code> enumeration in the <code><a class="el" href="tidyenum_8h.html" title="Separated public enumerations header providing important indentifiers for LibTidy and internal users...">tidyenum.h</a></code> file, and get/set functions for each option type.</p>
<p>This file indicates how to add a new option to tidy, here adding an option <code>TidyEscapeScripts</code>. In essence it consists of 4 steps:</p>
<ol type="1">
<li>Add the option <code>ID</code> to <code><a class="el" href="tidyenum_8h.html" title="Separated public enumerations header providing important indentifiers for LibTidy and internal users...">tidyenum.h</a></code>.</li>
<li>Add to the <code>table</code> <code>TidyOptionImpl option_defs[]</code> in <code>config.c</code></li>
<li>Add the id, with a <code>description</code> to <code><a class="el" href="language__en_8h.html">language_en.h</a></code></li>
<li>Use the option in the code.</li>
</ol>
<h4>1. Option ID</h4>
<p>In <code><a class="el" href="tidyenum_8h.html" title="Separated public enumerations header providing important indentifiers for LibTidy and internal users...">tidyenum.h</a></code> the <code>TidyOptionId</code> can be in any order, but please try to keep things alphabetical, and keep in mind that <code>N_TIDY_OPTIONS</code> must remain the last. Choosing the id name can be any string, but by convention it will commence with <code>Tidy</code> followed by brief descriptive text.</p>
<p>Naturally it can not be the same as any exisitng option. That is, it must be unique. And it will be followed by a brief descriptive special doxygen formatted comment. So for this new option I have chosen -</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;TidyEscapeScripts,       /**&lt; Escape items that look like closing tags */</div>
</div><!-- fragment --><h4>2. Table Definition</h4>
<p>In <code>config.c</code>, added in <code>TidyOptionImpl option_defs[]</code>. Again it can be in any order, but normally a new option would be added just before the last <code>N_TIDY_OPTIONS</code>, which must remain the last.</p>
<p>The structure definition of the table entries is simple -</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;struct _tidy_option</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    TidyOptionId        id;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    TidyConfigCategory  category;   /* put &#39;em in groups */</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    ctmbstr             name;       /* property name */</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    TidyOptionType      type;       /* string, int or bool */</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    ulong               dflt;       /* default for TidyInteger and TidyBoolean */</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    ParseProperty*      parser;     /* parsing method, read-only if NULL */</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    const ctmbstr*      pickList;   /* pick list */</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    ctmbstr             pdflt;      /* default for TidyString */</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;};</div>
</div><!-- fragment --><p>Naturally it will commence with the above chosen unique <code>id</code>.</p>
<p>The <code>category</code> will be one of this enumeration -</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;typedef enum</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  TidyMarkup,          /**&lt; Markup options: (X)HTML version, etc */</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  TidyDiagnostics,     /**&lt; Diagnostics */</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  TidyPrettyPrint,     /**&lt; Output layout */</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  TidyEncoding,        /**&lt; Character encodings */</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  TidyMiscellaneous,   /**&lt; File handling, message format, etc. */</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  TidyInternalCategory /**&lt; Option is internal only. */</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;} TidyConfigCategory;</div>
</div><!-- fragment --><p>Care, each of these enumeration strings have been equated to 2 uppercase letters. If you feel there should be another <code>category</code> or group then this can be discussed, and added.</p>
<p>The <code>name</code> can be anything, but should try to be somewhat descriptive of the option. Again this string must be unique. It should be lowercase alphanumeric characters, and can contain a <code>-</code> separator. Remember this is the name places on the command line, or in a configuration file to set the option.</p>
<p>The <code>type</code> is one of the following enumeration items -</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;typedef enum</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  TidyString,          /**&lt; String */</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  TidyInteger,         /**&lt; Integer or enumeration */</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  TidyBoolean          /**&lt; Boolean flag */</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;} TidyOptionType;</div>
</div><!-- fragment --><p>Care, each of these enumeration strings have been equated to two uppercase letters. If you feel there should be another <code>type</code> then this can be discussed, but would require other additional things. And also note the <code>TidyTriState</code> is the same as a <code>TidyInteger</code> except uses its own parser.</p>
<p>The next item is the <code>default</code> value for a boolean, tristate or integer. Note tidy set <code>no=0</code> and <code>yes=1</code> as its own <code>Bool</code> enumeration.</p>
<p>There are a number of <code>parser</code> for the options. Likewise a number of <code>pickList</code>. Find another option similar to your new option and use the same values.</p>
<p>Presently no options have the final <code>default</code> string, and it is left out of the table. The compiler will add a NULL.</p>
<p>The final table entry added. Note in here the spacing has been compressed, but in the actual code the current column settings should be maintained if possible -</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{ TidyEscapeScripts, PP, &quot;escape-scripts&quot;, BL, yes, ParseBool, boolPicks[, NULL] }, /* 20160227 - Issue #348 */</div>
</div><!-- fragment --><h4>3. Option Description</h4>
<p>In <code><a class="el" href="language__en_8h.html">language_en.h</a></code>, in the section labelled <b>Options Documentation</b>. Please try to keep this in alphabetical order.</p>
<p>Each entry is a structure with 3 members - </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;typedef struct languageDictionaryEntry {</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    uint key;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    uint pluralForm;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    ctmbstr value;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;} languageDictionaryEntry;</div>
</div><!-- fragment --><p>The <code>key</code> is the option <code>ID</code>; The <code>pluralForm</code> is not used for options, and should be <code>0</code>; The <code>value</code> is the description string.</p>
<p>Some care has to be taken with the description string. The only html allowed here is <code>&lt;code&gt;...&lt;/code&gt;</code>, <code>&lt;var&gt;...&lt;/var&gt;</code>, <code>&lt;em&gt;...&lt;/em&gt;</code>, <code>&lt;strong&gt;...&lt;/strong&gt;</code>, and <code>&lt;br/&gt;</code>. Entities, tags, attributes, etc., should be enclosed in <code>&lt;code&gt;...&lt;/code&gt;</code>. Option values should be enclosed in <code>&lt;var&gt;...&lt;/var&gt;</code>. It's very important that <code>&lt;br/&gt;</code> be self-closing! This string is processed to build the API documentation.</p>
<p>This is the desription added for this new option.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  TidyEscapeScripts,          0,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &quot;This option causes items that look like closing tags, like &lt;code&gt;&amp;lt;/g&lt;/code&gt; to be &quot;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    &quot;escaped to &lt;code&gt;&amp;lt;\\/g&lt;/code&gt;. Set this option to &#39;no&#39; if you do not want this.&quot;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;},</div>
</div><!-- fragment --><h4>4. Use in Code</h4>
<p>This can be added anywhere in the code to change the current code action. While the testing of the option depends on the option type, the most common is <code><a class="el" href="config_8h.html#a10b44b7dac0b2045172439ba0880db19">cfgBool( doc, id )</a></code>. Here is an example of where this new option is used -</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;/*\ if javascript insert backslash before / </div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160; *  Issue #348 - Add option, escape-scripts, to skip</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;\*/</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;if ((TY_(IsJavaScript)(container)) &amp;&amp; cfgBool(doc, TidyEscapeScripts))</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;{</div>
</div><!-- fragment --><h4>Summary</h4>
<p>That's about it. Just 4 places. Obviously the best idea it to search for an existing option <code>ID</code>, and follow where it is all defined and used, and copy that. It is not difficult.</p>
<p>; eof 20160310 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 22 2017 16:15:40 for HTML Tidy by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
