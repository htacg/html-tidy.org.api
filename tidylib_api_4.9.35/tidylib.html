<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>HTML Tidy: tidylib</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HTML Tidy
   &#160;<span id="projectnumber">4.9.35</span>
   </div>
   <div id="projectbrief">The HTACG Tidy HTML Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Tidy&#160;Home</span></a></li>
      <li class="current"><a href="pages.html"><span>Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="https://github.com/htacg/tidy-html5/issues"><span>Bugs&#160;&&#160;Issues</span></a></li>
      <li><a href="https://github.com/htacg/tidy-html5"><span>github</span></a></li>
      <li><a href="http://www.htacg.org/"><span>htacg.org</span></a></li>
      <li><a href="http://www.html-tidy.org/"><span>html-tidy.org</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('tidylib.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">tidylib </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#about_tidylib">TidyLib  features</a></li>
<li class="level1"><a href="#return_code">Return codes</a></li>
<li class="level1"><a href="#app_notes">Application Notes</a></li>
<li class="level1"><a href="#example_hello">tidylib example</a></li>
</ul>
</div>
<div class="textblock"><p>About the tidylib C library and code</p>
<h1><a class="anchor" id="about_tidylib"></a>
TidyLib  features</h1>
<ul>
<li>easy to integrate. Because of the near universal adoption of C linkage, a C interface may be called from a great number of programming languages.</li>
<li>designed to use opaque types in the public interface. This allows the application to just pass an integer around and the need to transform data types in different languages is minimized. As a results it’s straight-forward to write very thin library wrappers for C++, Pascal, and COM/ATL.</li>
<li>eats its own dogfood. HTML Tidy links directly to TidyLib.</li>
<li>is Thread Safe and Re-entrant. Because there are many uses for HTML Tidy - from content validation, content scraping, conversion to XHTML - it was important to make TidyLib run reasonably well within server applications as well as client side.</li>
<li>uses adaptable I/O. As part of the larger integration strategy it was decided to fully abstract all I/O. This means a (relatively) clean separation between character encoding processing and shovelling bytes back and forth. Internally, the library reads from sources and writes to sinks. This abstraction is used for both markup and configuration “files”. Concrete implementations are provided for file and memory I/O, and new sources and sinks may be provided via the public interface.</li>
</ul>
<h1><a class="anchor" id="return_code"></a>
Return codes</h1>
<p>It’s important to understand that API functions that return an integer almost universally adhere to the following convention:</p>
<ul>
<li><b>0</b> == <b>Success</b> <ul>
<li>Good to go.</li>
</ul>
</li>
<li><b>1</b> == <b>Warnings</b>, but no errors<ul>
<li>Check the error buffer or track error messages for details.</li>
</ul>
</li>
<li><b>2</b> == <b>Errors</b> (and maybe warnings)<ul>
<li>By default, Tidy will not produce output. You can force output with the TidyForceOutput option. As with warnings, check error buffer or track error messages for details.</li>
</ul>
</li>
<li><b>&lt; 0</b> == <b>Severe error</b><ul>
<li>Usually value equals <code>-errno</code>. See errno.h.</li>
</ul>
</li>
</ul>
<p>Also, by default, warning and error messages are sent to stderr. You can redirect diagnostic output using either <a class="el" href="group__IO.html#ga669758031bbd5d4ba957b19e77229c8b" title="Set error sink to named file. ">tidySetErrorFile()</a> or <a class="el" href="group__IO.html#ga5e5cffe93edf4bea0d3214be70d6f77b" title="Set error sink to given buffer. ">tidySetErrorBuffer()</a>. See <a class="el" href="tidy_8h.html" title="Defines HTML Tidy API implemented by tidy library. ">tidy.h</a> for details.</p>
<h1><a class="anchor" id="app_notes"></a>
Application Notes</h1>
<p>Of course, there are functions to parse and save both markup and configuration files. For the adventurous, it is possible to create new input sources and output sinks. For example, a URL source could pull the markup from a given URL.</p>
<p>It is also worth remembering that an application may instantiate any number of document and buffer objects. They are fairly cheap to initialize and destroy (just memory allocation and zeroing, really), so they may be created and destroyed locally, as needed. There is no problem keeping them around a while for keeping state. For example, a server app might keep a global document as a master configuration. As documents are parsed, they can copy their configuration data from the master instance. See <a class="el" href="group__Configuration.html#ga0b6cb26ab5dbbe0a0841d605fbd06fad" title="Copy current configuration settings from one document to another. ">tidyOptCopyConfig()</a>. If the master copy is initialized at startup, no synchronization is necessary.</p>
<h1><a class="anchor" id="example_hello"></a>
tidylib example</h1>
<div class="fragment"><div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="tidy_8h.html">tidy.h</a>&gt;</span>;</div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="buffio_8h.html">buffio.h</a>&gt;</span>;</div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span>;</div>
<div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv )</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* input = <span class="stringliteral">&quot;&lt;title&gt;Hello&lt;/title&gt;&lt;p&gt;World!&quot;</span>;</div>
<div class="line">    <a class="code" href="buffio_8h.html#struct__TidyBuffer">TidyBuffer</a> output = {0};</div>
<div class="line">    <a class="code" href="buffio_8h.html#struct__TidyBuffer">TidyBuffer</a> errbuf = {0};</div>
<div class="line">    <span class="keywordtype">int</span> rc = -1;</div>
<div class="line">    Bool ok;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Initialize &quot;document&quot;</span></div>
<div class="line">    <a class="code" href="group__Opaque.html#structTidyDoc">TidyDoc</a> tdoc = <a class="code" href="group__Basic.html#ga728e98da5985ecb26de7c6c45f7fcaf2">tidyCreate</a>();</div>
<div class="line">    printf( <span class="stringliteral">&quot;Tidying:\t%s\n&quot;</span>, input );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Convert to XHTML</span></div>
<div class="line">    ok = <a class="code" href="group__Configuration.html#gac9de7e155bea5c28713f2bfb93614472">tidyOptSetBool</a>( tdoc, <a class="code" href="tidyenum_8h.html#a3a1401652599150188a168dade7dc150a4c6d0d218ec0ee2af04fcde1756bc515">TidyXhtmlOut</a>, yes );  </div>
<div class="line">    <span class="keywordflow">if</span> ( ok )</div>
<div class="line">        rc = <a class="code" href="group__IO.html#ga5e5cffe93edf4bea0d3214be70d6f77b">tidySetErrorBuffer</a>( tdoc, &amp;errbuf );    <span class="comment">// Capture diagnostics</span></div>
<div class="line">    <span class="keywordflow">if</span> ( rc &gt;= 0 )</div>
<div class="line">        rc = <a class="code" href="group__Parse.html#ga50c02fa244dcd120ae339719c2132ff9">tidyParseString</a>( tdoc, input );         <span class="comment">// Parse the input</span></div>
<div class="line">    <span class="keywordflow">if</span> ( rc &gt;= 0 )</div>
<div class="line">        rc = <a class="code" href="group__Clean.html#ga11fd23eeb4acfaa0f9501effa0c21269">tidyCleanAndRepair</a>( tdoc );             <span class="comment">// Tidy it up!</span></div>
<div class="line">    <span class="keywordflow">if</span> ( rc &gt;= 0 )</div>
<div class="line">        rc = <a class="code" href="group__Clean.html#ga6170500974cc02114f6e4a29d44b7d77">tidyRunDiagnostics</a>( tdoc );             <span class="comment">// Kvetch</span></div>
<div class="line">    <span class="keywordflow">if</span> ( rc &gt; 1 )                                    <span class="comment">// If error, force output.</span></div>
<div class="line">        rc = ( <a class="code" href="group__Configuration.html#gac9de7e155bea5c28713f2bfb93614472">tidyOptSetBool</a>(tdoc, <a class="code" href="tidyenum_8h.html#a3a1401652599150188a168dade7dc150a25aa8c728584df0a3a8ca80d0926536e">TidyForceOutput</a>, yes) ? rc : -1 );</div>
<div class="line">    <span class="keywordflow">if</span> ( rc &gt;= 0 )</div>
<div class="line">        rc = <a class="code" href="group__Save.html#ga7e8642262c8c4d34cf7cc426647d29f0">tidySaveBuffer</a>( tdoc, &amp;output );        <span class="comment">// Pretty Print</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( rc &gt;= 0 )</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">if</span> ( rc &gt; 0 )</div>
<div class="line">        printf( <span class="stringliteral">&quot;\nDiagnostics:\n\n%s&quot;</span>, errbuf.<a class="code" href="buffio_8h.html#a2b1c3814410eefbe2168b248485eea91">bp</a> );</div>
<div class="line">    printf( <span class="stringliteral">&quot;\nAnd here is the result:\n\n%s&quot;</span>, output.<a class="code" href="buffio_8h.html#a2b1c3814410eefbe2168b248485eea91">bp</a> );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        printf( <span class="stringliteral">&quot;A severe error (%d) occurred.\n&quot;</span>, rc );</div>
<div class="line"></div>
<div class="line">    <a class="code" href="buffio_8h.html#a65aae9ae4b499e62038700f4792849fc">tidyBufFree</a>( &amp;output );</div>
<div class="line">    <a class="code" href="buffio_8h.html#a65aae9ae4b499e62038700f4792849fc">tidyBufFree</a>( &amp;errbuf );</div>
<div class="line">    <a class="code" href="group__Basic.html#gacc380c1451088b89898a85337b113713">tidyRelease</a>( tdoc );</div>
<div class="line">    <span class="keywordflow">return</span> rc;</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jun 9 2015 15:54:14 for HTML Tidy by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
